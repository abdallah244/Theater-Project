<!--
Audience: Frontend Engineer (Next.js)
Goal: Define what to implement BEFORE final UI design.
-->

# Frontend Implementation Spec (Next.js) โ ูุจู ุงูุฏูุฒุงูู

**ุงููุดุฑูุน:** ูููุน ููุจ ูุญุฌุฒ ููุงุนุฏ ุนุฑูุถ ูุณุฑุญ ุงูุฃุทูุงู/ุงูุณูุฑู (Mobile-first)

**Frontend Framework:** Next.js

**ูุฏู ุงููุซููุฉ:** ุชูุญูุฏ ุดุบู ุงูู Frontend ูุจู ุชุณููู ุงูุฏูุฒุงูู ุงูููุงุฆูุ ุจุญูุซ ูุจุฏุฃ ุงูุชูููุฐ ุจุตูุญุงุช ุดุบุงูุฉ (Functional Skeleton) ูุน Mock UI/Wireframeุ ูุฑุจุท ูุงูู ูุน ุงูู APIs.

---

## 1) ูุฎุฑุฌุงุช ูุทููุจุฉ ูุจู ุงูุฏูุฒุงูู (Pre-Design Deliverables)

- ูููู ูุดุฑูุน Next.js ุฌุงูุฒ + ุชุดุบูู ูุญูู.
- Routing ููุชูู ููุตูุญุงุช ุงูุฃุณุงุณูุฉ (ุญุชู ูู UI ุจุณูุท).
- Integrations ูุน Backend APIs (NestJS) ุจุงุณุชุฎุฏุงู ุทุจูุฉ `api client` ูุงุญุฏุฉ.
- ุฎุฑูุทุฉ ููุงุนุฏ ุชุนูู ุจุงููุงูู ูุธููููุง (Selection/States/Total) ุจุชุตููู Wireframe.
- Forms (ูููู ุงูุฃูุฑ) + Validation + ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ.
- Admin (ุญุฏ ุฃุฏูู) ูุชุฌุฑุจุฉ ุงูู flows: Login + ุฅุฏุงุฑุฉ ุงูุนุฑุถ + ูุชุญ/ููู ุงูุญุฌุฒ + ุชุฎุทูุท/ุชุณุนูุฑ + ูุดุงูุฏุฉ ุงูุญุฌูุฒุงุช.

**ุบูุฑ ูุทููุจ ูุจู ุงูุฏูุฒุงูู:** ุฃููุงู/ูููุฉ/ุชูุงุตูู Visual ููุงุฆูุฉ.

---

## 2) ุงูุตูุญุงุช ุงููุทููุจุฉ (Pages)

> ุฃุณูุงุก ุงููุณุงุฑุงุช ูุงุจูุฉ ููุชุนุฏููุ ุงูููู ุงููุธููุฉ.

### Public

- `/` ูุงุฆูุฉ ุงูุนุฑูุถ (Shows list)
- `/shows/[id]` ุตูุญุฉ ุงูุนุฑุถ + ุฎุฑูุทุฉ ุงูููุงุนุฏ
- `/booking/[code]` ูุชุงุจุนุฉ/ุชุฃููุฏ ุงูุญุฌุฒ (ุงุฎุชูุงุฑู ุฅุฐุง API ูุชุงุญ)

### Admin

- `/admin/login`
- `/admin/shows`
- `/admin/shows/[id]` ุฅุฏุงุฑุฉ ุนุฑุถ: ูุชุญ/ููู + ุชุณุนูุฑ ุตููู + ุชุนุฏูู ุฅุฎูุงุก ุงูููุงุนุฏ
- `/admin/bookings` ูุชุงุจุนุฉ ุงูุญุฌูุฒุงุช + (ุงุฎุชูุงุฑู) ุชุฃููุฏ ุงูุฏูุน ุงููุฏูู

---

## 3) ููููุงุช UI (Components) โ ูู Wireframe

> ูุง ูุซุจุช ุดูู ููุงุฆู ูุจู ุงูุฏูุฒุงููุ ููุท Components ูุธูููุฉ.

- `SeatMap`
  - ูุฑุณู ุงูุตููู (AโO ุฃู ุญุณุจ ุงูู API)
  - ูุทุจู ุญุงูุงุช ุงูููุงุนุฏ:
    - ๐ข AVAILABLE
    - ๐ด RESERVED
    - โซ HIDDEN
  - ูุฏุนู Multi-select
- `SeatLegend` ููุชุงุญ ุงูุฃููุงู/ุงูุญุงูุงุช
- `SelectionSummary`
  - ูุนุฑุถ ุงูููุงุนุฏ ุงููุฎุชุงุฑุฉ
  - ุงูุฅุฌูุงูู ุญุณุจ ุชุณุนูุฑ ุงูุตู
- `GuardianForm`
  - name, mobile, childrenCount
- `BookingStatus`
  - ุฑูู ุงูุญุฌุฒุ ุงูุญุงูุฉุ ุงูููุงุนุฏ
- Admin:
  - `AdminLoginForm`
  - `ShowEditor`
  - `LayoutEditor` (ุฅุฎูุงุก/ุฅุธูุงุฑ)
  - `PricingEditor` (ุณุนุฑ ููู Row)
  - `BookingsTable`

---

## 4) ุฎุฑูุทุฉ ุงูููุงุนุฏ (Seat Map) โ ุณููู ุงูุชูููุฐ

### 4.1 Input ูู ุงูู API

ุงูู Frontend ูุนุชูุฏ ุนูู Response ูุญุชูู:

- Rows (ูุซู A..O)
- Seats per row (ุฃุฑูุงู)
- State ููู seat (AVAILABLE/RESERVED/HIDDEN)
- Pricing per row
- `bookingStatus` ููุนุฑุถ (OPEN/CLOSED)

### 4.2 Interactions

- ุงูุถุบุท ุนูู ููุนุฏ:
  - ูู `AVAILABLE`: Toggle select/unselect
  - ูู `RESERVED` ุฃู `HIDDEN`: ูุง ูุชู ุงูุงุฎุชูุงุฑ (ูุน Tooltip/Message ุจุณูุท)
- ุนุฑุถ ุฅุฌูุงูู ุงูุณุนุฑ ููุฑูุง.
- ุนูุฏ `bookingStatus=CLOSED`: ุชุนุทูู ุฒุฑ ุงูุญุฌุฒ ูุชุนุทูู ุงุฎุชูุงุฑ ุงูููุงุนุฏ (ุฃู ุงูุณูุงุญ ุจุงูุนุฑุถ ููุท ุญุณุจ ูุฑุงุฑ ุงูู Backendุ ุงูุงูุชุฑุงุถู: ููุน ุงูุงุฎุชูุงุฑ).

### 4.3 Mobile-first

- ุงูุฎุฑูุทุฉ ุฏุงุฎู Container ูุงุจู ููุชูุฑูุฑ.
- ุฅุฐุง ุงูุฎุฑูุทุฉ ูุจูุฑุฉ:
  - ุญู ุจุณูุท: scroll ุฃููู/ุฑุฃุณู ุฏุงุฎู ุงูุฎุฑูุทุฉ.
  - ุชุญุณูู ูุงุญู: Zoom/Pan.

---

## 5) ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State) ูุงูุจูุงูุงุช

### 5.1 Data Fetching

- ุงุณุชุฎุฏุงู `fetch` ุฃู `axios`.
- Layer ูุงุญุฏุฉ: `lib/api/*`.
- ุนุฏู ุชูุฑุงุฑ ููุณ endpoints ูู ุฃูุซุฑ ูู ููุงู.

### 5.2 Caching/Sync

- ุงูุญุฏ ุงูุฃุฏูู: Fetch ุนูุฏ ูุชุญ ุงูุตูุญุฉ + Refresh ูุฏูู.
- ุชุญุณูู ูุงุญู: Polling ุฎููู ุฃู SSE/WebSocket (ููุณ ุถูู MVP ุฅูุง ุฅุฐุง ุทูุจ).

### 5.3 ุงูุชุนุงูู ูุน ุฃุฎุทุงุก ุงูุญุฌุฒ

- ูู `POST /bookings` ุฑุฌุน ุฎุทุฃ (ูุซูุงู ููุนุฏ ุญูุฌุฒ ููุชู):
  - ุฅุนุงุฏุฉ Fetch ูุฎุฑูุทุฉ ุงูููุงุนุฏ
  - ุชูุถูุญ ุฑุณุงูุฉ: โุจุนุถ ุงูููุงุนุฏ ุฃุตุจุญุช ูุญุฌูุฒุฉุ ุฑุฌุงุก ุงุฎุชุฑ ููุงุนุฏ ุฃุฎุฑู.โ

---

## 6) Forms & Validation

### GuardianForm

- ุงูุงุณู: ูุทููุจ
- ุฑูู ุงูููุจุงูู: ูุทููุจ + format ุจุณูุท (ุฑูู ูุตุฑู ุฅู ุฃููู)
- ุนุฏุฏ ุงูุฃุทูุงู: ูุทููุจ + ุฑูู ููุฌุจ

**ูุจุฏุฃ:** Validation ุนูู ุงููุงุฌูุฉ ูุชุญุณูู UX + Validation ุนูู ุงูุณูุฑูุฑ ููุฑุฌุน ููุงุฆู.

---

## 7) Admin (MVP)

### Admin Auth

- Token storage: ุงูุฃูุถู Cookie HttpOnly (ูู backend ูุฏุนู)ุ ุจุฏูู ุณุฑูุน: localStorage ูุน ูุฑุงุนุงุฉ ุงููุฎุงุทุฑ.
- ุญูุงูุฉ ุงูุตูุญุงุช `/admin/*` ุนุจุฑ guard (client/server ุญุณุจ ุทุฑููุฉ auth).

### Admin Flows

- ุฅูุดุงุก ุนุฑุถ.
- ุชุญุฏูุซ ุญุงูุฉ ุงูุญุฌุฒ OPEN/CLOSED.
- ุชุนุฏูู Layout:
  - ุฅุฎูุงุก ุตููู/ูุฑุงุณู.
- ุชุนุฏูู Pricing:
  - ุณุนุฑ ููู row.
- ูุดุงูุฏุฉ ุงูุญุฌูุฒุงุช.
- (ูู ูุณุงุฑ ุงูุฏูุน ุงููุฏูู) ุฒุฑ `Mark as paid`.

---

## 8) ูุนุงููุฑ ุฌุงูุฒูุฉ ุงูู Frontend ูุจู ุงูุฏูุฒุงูู (Definition of Done)

- [ ] ูู ุงูุตูุญุงุช ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก ูุชุนุฑุถ ุจูุงูุงุช ุญููููุฉ ูู ุงูู API ุฃู Mock ุซุงุจุช.
- [ ] Seat map ุชุดุชุบู: select/unselect + ุฅุฌูุงูู ุงูุณุนุฑ + ููุน ุงุฎุชูุงุฑ ุงููุญุฌูุฒ/ุงููุฎูู.
- [ ] Flow ุงูุญุฌุฒ ูุงูู: ุงุฎุชูุงุฑ ููุงุนุฏ โ ุจูุงูุงุช ูููู ุงูุฃูุฑ โ ุฅุฑุณุงู ุงูุทูุจ โ ุตูุญุฉ ุชุฃููุฏ.
- [ ] Handling ูุงุถุญ ูุญุงูุงุช: Loading / Empty / Error.
- [ ] Admin MVP ูุดุชุบู ุนููููุง (ุญุชู ูู UI ุจุณูุท).
- [ ] Mobile usability: usable ุนูู ุดุงุดุฉ 360px ุจุฏูู ูุณุฑ layout.

---

## 9) ููุงุญุธุงุช ุชูุงูู (Backend Contracts)

> ูุชูููู ุฅุนุงุฏุฉ ุงูุดุบูุ ูุงุฒู ูุชูู ุนูู Contract ูุจูุฑูุง.

- Endpoint ุฎุฑูุทุฉ ุงูููุงุนุฏ ูุฌุจ ุฃู ูุฑุฌุน:
  - seat states + pricing + booking open/close
- `POST /bookings` ูุฌุจ ุฃู ููุจู:
  - `showId`
  - `seats[]`
  - guardian fields
- Responses ุชุนุชูุฏ ุนูู ุฃููุงุฏ ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ุชุนุงุฑุถ ุงูููุงุนุฏ.

---

## 10) ูุทุงู ุฎุงุฑุฌ ุงูุชูููุฐ ุงูุขู

- ูุง ูุถูู ุตูุญุงุช ุฃู features ุฅุถุงููุฉ ุบูุฑ ุงูููุฌูุฏุฉ ูู ุงูู report.
- ูุง ูุถูู ูุธุงู ุชุตููู/ูููุฉ ูุจู ุชุณููู ููู UI/UX ุงูููุงุฆู.
