<!--
This document is designed to look good on GitHub.
Language: Arabic (primary) with light English technical terms.
-->

# Theater Seat Booking Website (NestJS + Next.js)

**ุงุณู ุงููุดุฑูุน:** ูููุน ููุจ ูุญุฌุฒ ููุงุนุฏ ุนุฑูุถ ูุณุฑุญ ุงูุฃุทูุงู ูุนุฑูุถ ุงูุณูุฑู (ููุงุณุจ ููููุจุงูู)

- **ุงูุชุงุฑูุฎ:** 2026-02-15
- **ุงูุญุงูุฉ ุงูุญุงููุฉ:** Scaffold ููุท (NestJS starter + ูุฌูุฏ Frontend ูุงุฑุบ)
- **ูุฏุฉ ุงูุชูููุฐ ุงููุณุชูุฏูุฉ:** 14 ููู

---

## ุฌุฏูู ุงููุญุชููุงุช

- [Theater Seat Booking Website (NestJS + Next.js)](#theater-seat-booking-website-nestjs--nextjs)
  - [ุฌุฏูู ุงููุญุชููุงุช](#ุฌุฏูู-ุงููุญุชููุงุช)
  - [1) ุงููุฏู ูุงููุชูุฌุฉ ุงููุชููุนุฉ](#1-ุงููุฏู-ูุงููุชูุฌุฉ-ุงููุชููุนุฉ)
  - [2) ูุทุงู ุงูุนูู (Scope)](#2-ูุทุงู-ุงูุนูู-scope)
    - [2.1 ุงููุณุชุฎุฏู (Customer)](#21-ุงููุณุชุฎุฏู-customer)
    - [2.2 ููุญุฉ ุชุญูู (Admin)](#22-ููุญุฉ-ุชุญูู-admin)
  - [3) ุงููุชุทูุจุงุช ุงููุธูููุฉ](#3-ุงููุชุทูุจุงุช-ุงููุธูููุฉ)
    - [3.1 ุฎุฑูุทุฉ ุงูููุงุนุฏ (Seat Map)](#31-ุฎุฑูุทุฉ-ุงูููุงุนุฏ-seat-map)
    - [3.2 ุชุฎุตูุต ุงูุชุฎุทูุท ุญุณุจ ุงูุนุฑุถ](#32-ุชุฎุตูุต-ุงูุชุฎุทูุท-ุญุณุจ-ุงูุนุฑุถ)
    - [3.3 ูุชุญ/ููู ุงูุญุฌุฒ](#33-ูุชุญููู-ุงูุญุฌุฒ)
    - [3.4 ุงูุฏูุน (ุงุฎุชูุงุฑู)](#34-ุงูุฏูุน-ุงุฎุชูุงุฑู)
  - [4) ููุงุนุฏ ุงูุนูู (Business Rules)](#4-ููุงุนุฏ-ุงูุนูู-business-rules)
  - [5) ูุชุทูุจุงุช ุบูุฑ ูุธูููุฉ (Non-Functional)](#5-ูุชุทูุจุงุช-ุบูุฑ-ูุธูููุฉ-non-functional)
  - [6) ุงูุชูุฏู ุงูุญุงูู](#6-ุงูุชูุฏู-ุงูุญุงูู)
    - [Backend](#backend)
    - [Frontend](#frontend)
  - [7) ุชุตููู ุงูุญู (Architecture + Data)](#7-ุชุตููู-ุงูุญู-architecture--data)
    - [7.1 ุงูุชูููุฉ (ูุชูุงููุฉ ูุน ุงูุฑูุจู)](#71-ุงูุชูููุฉ-ูุชูุงููุฉ-ูุน-ุงูุฑูุจู)
    - [7.2 ููุงูุงุช ุงูุจูุงูุงุช (ููุชุฑุญ)](#72-ููุงูุงุช-ุงูุจูุงูุงุช-ููุชุฑุญ)
    - [7.3 ุญุงูุงุช ุงูููุงุนุฏ ูุงูุญุฌุฒ](#73-ุญุงูุงุช-ุงูููุงุนุฏ-ูุงูุญุฌุฒ)
    - [7.4 API (ุนุงูู ุงููุณุชูู)](#74-api-ุนุงูู-ุงููุณุชูู)
  - [8) ุงูู MVP ููุนุงููุฑ ุงููุจูู](#8-ุงูู-mvp-ููุนุงููุฑ-ุงููุจูู)
  - [9) ุฎุทุฉ 14 ููู (ุชูุตูู ูููู)](#9-ุฎุทุฉ-14-ููู-ุชูุตูู-ูููู)
  - [10) ุชูุฒูุน ุงูุฃุฏูุงุฑ](#10-ุชูุฒูุน-ุงูุฃุฏูุงุฑ)
  - [11) ุงููุฎุงุทุฑ ูุฎุทุฉ ุงูุชุนุงูู](#11-ุงููุฎุงุทุฑ-ูุฎุทุฉ-ุงูุชุนุงูู)
  - [12) ุงููุชุงุจุนุฉ ูุงูุญูููุฉ](#12-ุงููุชุงุจุนุฉ-ูุงูุญูููุฉ)

---

## 1) ุงููุฏู ูุงููุชูุฌุฉ ุงููุชููุนุฉ

**ุงููุฏู:** ูููุน ููุจ Mobile-first ูุนุฑุถ ุฎุฑูุทุฉ ููุงุนุฏ ุงููุณุฑุญ ููู ุนุฑุถุ ููุชูุญ ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ูุฑุณูุ ููููุน ุงูุญุฌุฒ ุงูููุฑุฑุ ููุณุฌู ุจูุงูุงุช ูููู ุงูุฃูุฑุ ูุน ุฏุนู ุงูุฏูุน ุฃูููุงูู ูุฎูุงุฑ.

**ููุงุญุธุฉ:** ูุฐุง ุงููุดุฑูุน _ูููุน ููุท_ ูููุณ ุชุทุจูู.

---

## 2) ูุทุงู ุงูุนูู (Scope)

### 2.1 ุงููุณุชุฎุฏู (Customer)

- ุงุฎุชูุงุฑ ุนุฑุถ + ุชุงุฑูุฎ/ููุนุงุฏ.
- ุนุฑุถ ุฎุฑูุทุฉ ุงูููุงุนุฏ ููุนุฑุถ (Rows ูุซู AโO).
- ุฃููุงู ุงูุญุงูุฉ:
  - ๐ข ูุชุงุญ
  - ๐ด ูุญุฌูุฒ
  - โซ ูุฎูู
- ุงุฎุชูุงุฑ ูุชุนุฏุฏ ููููุงุนุฏ + ุนุฑุถ ุฅุฌูุงูู ุงูุณุนุฑ.
- ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงููุทููุจุฉ:
  - ุงุณู ูููู ุงูุฃูุฑ
  - ุฑูู ุงูููุจุงูู
  - ุนุฏุฏ ุงูุฃุทูุงู
  - ุฑูู ุงูุนุฑุถ + ุงูุชุงุฑูุฎ/ุงูููุนุงุฏ
- ุชุฃููุฏ ุงูุญุฌุฒ.
- ุงูุฏูุน (ุงุฎุชูุงุฑู): ููุฑู / ููุฏุงููู ูุงุด / ุฅูุณุชุง ุจุงู ุฃู ูุณููุฉ ููุงุณุจุฉ ุฏุงุฎู ูุตุฑ.

### 2.2 ููุญุฉ ุชุญูู (Admin)

- ุฅูุดุงุก/ุชุนุฏูู ุนุฑุถ.
- ุชุฎุตูุต ุดูู ุงููุณุฑุญ ุญุณุจ ุงูุนุฑุถ (Layout per show).
- ุฅุฎูุงุก ุตููู/ูุฑุงุณู.
- ุชุญุฏูุฏ ุณุนุฑ ูู ุตู.
- ูุชุญ/ููู ุงูุญุฌุฒ ููุนุฑุถ.
- ูุชุงุจุนุฉ ุงูุญุฌูุฒุงุช + (ุงุฎุชูุงุฑู) ุชุฃููุฏ ุงูุฏูุน ุงููุฏูู.

---

## 3) ุงููุชุทูุจุงุช ุงููุธูููุฉ

### 3.1 ุฎุฑูุทุฉ ุงูููุงุนุฏ (Seat Map)

- ุฑุณู ุงูููุงุนุฏ ุนูู ููุฆุฉ ุตููู (AโO ูุซููุง) ูุน ุฃุฑูุงู.
- ูุงุฌูุฉ ููุงุณุจุฉ ููููุจุงูู:
  - ุฃููููุฉ: ูุงุฌูุฉ ูุชุฌุงูุจุฉ + ุณุญุจ ุฃููู/ุฑุฃุณู ุฏุงุฎู ุงูุฎุฑูุทุฉ.
  - ุชุญุณูู: Zoom/Pan ุฅู ุงุญุชุฌูุง.
- ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ูุฑุณู.
- ุชุญุฏูุซ ุงูุญุงูุฉ ุจุนุฏ ุงูุญุฌุฒ ูุจุงุดุฑุฉ.

### 3.2 ุชุฎุตูุต ุงูุชุฎุทูุท ุญุณุจ ุงูุนุฑุถ

- ููู ุนุฑุถ Layout ูุณุชูู:
  - ุนุฏุฏ ุงูุตููู/ุงูููุงุนุฏ ูุงุจู ููุชุบููุฑ.
  - ุฅููุงููุฉ ุฅุฎูุงุก ุตููู/ูุฑุงุณู.
  - ุชุณุนูุฑ ุตููู ูุณุชูู.

### 3.3 ูุชุญ/ููู ุงูุญุฌุฒ

- Toggle ูุญุงูุฉ ุงูุญุฌุฒ ุนูู ูุณุชูู ุงูุนุฑุถ: `OPEN` / `CLOSED`.
- ุนูุฏ `CLOSED`:
  - ูุง ูุชู ูุจูู ุญุฌูุฒุงุช ุฌุฏูุฏุฉ.
  - ูููู ุงูุงุณุชูุฑุงุฑ ูู ุนุฑุถ ุงูุฎุฑูุทุฉ (ูุฑุงุฑ ุฃุฏูู).

### 3.4 ุงูุฏูุน (ุงุฎุชูุงุฑู)

ูุถูุงู ุงูุชุณููู ุฎูุงู 14 ูููุ ุงูุฏูุน ูุชู ุจูุณุงุฑูู ูุงุถุญูู:

**ุงููุณุงุฑ A (Integration - ุงูุฃูุถู):**

- ุฏูุฌ ุจูุงุจุฉ ุฏูุน ูุตุฑูุฉ ุดุงููุฉ (Cards + Wallets + Fawry) _ุญุณุจ ุงููุชุงุญ ูุฏููู ูููุงุชูุญ ุงูู API_.
- Webhook ูุชุฃููุฏ ุงูุฏูุน ูุชุบููุฑ ุญุงูุฉ ุงูุญุฌุฒ ุชููุงุฆููุง.

**ุงููุณุงุฑ B (Manual - ุงูุฃุณุฑุน ููุชุณููู):**

- ุฅูุดุงุก ุญุฌุฒ ุจุญุงูุฉ `PENDING_PAYMENT`.
- ุนุฑุถ ุชุนูููุงุช ุงูุฏูุน ุงููุฏูู + ุฑูู ูุฑุฌุนู.
- ุงูุฃุฏูู ูุคูุฏ ุงูุฏูุน ุนุจุฑ ุฅุฌุฑุงุก `mark-paid`.

---

## 4) ููุงุนุฏ ุงูุนูู (Business Rules)

- ููุน ุญุฌุฒ ููุณ ุงููุฑุณู ูุฑุชูู ูููุณ ุงูุนุฑุถ.
- ูุง ูููู ุชุฃููุฏ ุญุฌุฒ ุฅุฐุง ุงูุนุฑุถ ูุบูู.
- ุงูููุงุนุฏ ุงููุฎููุฉ ูุง ุชุธูุฑ ููุชุงุญุฉ ููุญุฌุฒ.
- ูู ุญุฌุฒ ูููู ุฃู ูุญุชูู ุนูู ุฃูุซุฑ ูู ูุฑุณู.

**ููุงุญุธุฉ ุชูููุฉ ูููุฉ:** ููุน ุงูุชูุฑุงุฑ ูุง ูููู ูู ุงููุงุฌูุฉ ููุทุ ูุงุฒู ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนุจุฑ **Unique Indexes** + ุนูููุงุช **Atomic** (ููุนุงููุงุช MongoDB ุนูุฏ ุงูุญุงุฌุฉ) ูุชุฌูุจ ุณุจุงูุงุช ุงูุญุฌุฒ.

---

## 5) ูุชุทูุจุงุช ุบูุฑ ูุธูููุฉ (Non-Functional)

- Mobile-first UI.
- ุฃุฏุงุก ุฌูุฏ ูู ุนุฑุถ ุฎุฑูุทุฉ ุงูููุงุนุฏ.
- ุฃูุงู:
  - ุญูุงูุฉ ููุญุฉ ุงูุฃุฏูู ุจุชุณุฌูู ุฏุฎูู ู JWT.
  - Validation ุนูู ุงูุณูุฑูุฑ.
- ุงุนุชูุงุฏูุฉ:
  - ูููุฏ Unique Indexes + Atomic updates ูููุน ุงูุชูุฑุงุฑ (ููุนุงููุงุช MongoDB ุนูุฏ ุงูุญุงุฌุฉ).
- ุชุดุบูู ูุฅุฏุงุฑุฉ:
  - Logging ุฃุณุงุณู ููุฃุฎุทุงุก.
  - ุฅุนุฏุงุฏุงุช ุนุจุฑ Environment Variables.

---

## 6) ุงูุชูุฏู ุงูุญุงูู

### Backend

- ููุฌูุฏ NestJS ูู [backend/](backend/).
- ุงูุญุงูุฉ: Starter ุงูุชุฑุงุถู ููุท (`GET /` ูุฑุฌุน "Hello World!").

### Frontend

- ูุง ููุฌุฏ ุชุทุจูู Frontend ุฌุงูุฒ ุจุนุฏ.
- ุงููุฌูุฏ ุงูุญุงูู [basic frontend no framwork/](basic%20frontend%20no%20framwork/) ูุงุฑุบุ ูุณูุชู ุชูููุฐ ุงูู Frontend ุจุงุณุชุฎุฏุงู **Next.js** (ููุถูู ุฅูุดุงุก ูุฌูุฏ ูุณุชูู ูุซู `frontend/` ูุชุทุจูู Next.js).

**ุงูุฎูุงุตุฉ:** ูู ูุจุฏุฃ ุชูููุฐ ุงูุฏูููู (Shows/Seats/Bookings) ุจุนุฏ.

---

## 7) ุชุตููู ุงูุญู (Architecture + Data)

### 7.1 ุงูุชูููุฉ (ูุชูุงููุฉ ูุน ุงูุฑูุจู)

- Backend: NestJS.
- Frontend: Next.js.
- Database: MongoDB.
- ODM: Mongoose.

### 7.2 ููุงูุงุช ุงูุจูุงูุงุช (ููุชุฑุญ)

- `Show`: ุจูุงูุงุช ุงูุนุฑุถ + ุญุงูุฉ ุงูุญุฌุฒ.
- `ShowLayout`: ุชุนุฑูู ุงูุตููู/ุงูููุงุนุฏ ููุนุฑุถ.
- `Seat`: Row + Number + Hidden.
- `RowPricing`: ุณุนุฑ ุงูุตู.
- `Booking`: ุจูุงูุงุช ููู ุงูุฃูุฑ + ุญุงูุฉ ุงูุญุฌุฒ.
- `BookingSeat`: ุฑุจุท ุงูุญุฌุฒ ุจููุงุนุฏ ูุญุฏุฏุฉ.
- `Payment` (ุงุฎุชูุงุฑู): ุทุฑููุฉ ุงูุฏูุน + ุญุงูุฉ ุงูุฏูุน + ูุฑุฌุน.

### 7.3 ุญุงูุงุช ุงูููุงุนุฏ ูุงูุญุฌุฒ

- Seat state (ูู ุงูุนุฑุถ): `AVAILABLE` / `RESERVED` / `HIDDEN`.
- Booking state: `CONFIRMED` ุฃู `PENDING_PAYMENT` / `PAID` / `CANCELLED`.
- (ุงุฎุชูุงุฑู) `HELD` ูููู ูุคูุช ุฃุซูุงุก ุงูุฏูุน.

### 7.4 API (ุนุงูู ุงููุณุชูู)

**Public**

- `GET /shows`
- `GET /shows/:id`
- `GET /shows/:id/seats`
- `POST /bookings`
- `GET /bookings/:code`

**Admin**

- `POST /admin/auth/login`
- `POST /admin/shows`
- `PATCH /admin/shows/:id`
- `PATCH /admin/shows/:id/booking-status`
- `PATCH /admin/shows/:id/layout`
- `PATCH /admin/shows/:id/pricing`
- `GET /admin/bookings`
- `PATCH /admin/bookings/:id/mark-paid` (ูุณุงุฑ ุงูุฏูุน ุงููุฏูู)

---

## 8) ุงูู MVP ููุนุงููุฑ ุงููุจูู

**ุงูู MVP ุงููุทููุจ ููุชุณููู ุฎูุงู 14 ููู:**

- [ ] ุนุฑุถ ูุงุฆูุฉ ุงูุนุฑูุถ + ูุชุญ ุตูุญุฉ ุนุฑุถ.
- [ ] ุนุฑุถ ุฎุฑูุทุฉ ุงูููุงุนุฏ ููุนุฑุถ (Rows AโO ูุซููุง) ุจุญุงูุงุช ๐ข/๐ด/โซ.
- [ ] ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ูุฑุณู + ุญุณุงุจ ุงูุฅุฌูุงูู ุญุณุจ ุณุนุฑ ุงูุตู.
- [ ] ุฅุฏุฎุงู ุจูุงูุงุช ูููู ุงูุฃูุฑ (ุงุณู/ููุจุงูู/ุนุฏุฏ ุงูุฃุทูุงู) + ุจูุงูุงุช ุงูุนุฑุถ.
- [ ] ููุน ุงูุญุฌุฒ ุงูููุฑุฑ (MongoDB Unique Index + Atomic operation/Transaction).
- [ ] ูุชุญ/ููู ุงูุญุฌุฒ ูู ููุญุฉ ุงูุฃุฏูู.
- [ ] ููุญุฉ ุฃุฏูู ุฃุณุงุณูุฉ: ุนุฑูุถ + ุชุณุนูุฑ ุตููู + ุฅุฎูุงุก ูุฑุงุณู/ุตููู + ูุดุงูุฏุฉ ุงูุญุฌูุฒุงุช.

**ุงูุฏูุน:**

- [ ] (ุงุฎุชูุงุฑู) ุชูุงูู ุจูุงุจุฉ ุฏูุน + Webhook
- [ ] ุฃู ุจุฏูู MVP: ุฏูุน ูุฏูู ูุน `PENDING_PAYMENT` + ุชุฃููุฏ ูู ุงูุฃุฏูู

---

## 9) ุฎุทุฉ 14 ููู (ุชูุตูู ูููู)

> ุงููุฏู: ุชุณููู MVP ุดุบุงู ุนูู ุงูููุจุงูู + Admin ุฃุณุงุณู + ููุน ุชูุฑุงุฑ ุงูุญุฌุฒ. ุงูุฏูุน ุญุณุจ ุฌุงูุฒูุฉ ูุฒูุฏ ุงูุฏูุน.

| ุงูููู | ุงููุงุชุฌ (Deliverable)                                         |
| ----: | ------------------------------------------------------------ |
|     1 | ุชุซุจูุช ุงูู MVP + ูุฑุงุฑ MongoDB + ุชุนุฑูู ูููุฐุฌ Layout            |
|     2 | ุฅุนุฏุงุฏ MongoDB + Schemas/Indexes + Modules ุงูุฃุณุงุณูุฉ ูู NestJS |
|     3 | APIs: Shows + Layout + Pricing + Seats view                  |
|     4 | Booking creation + ููุน ุงูุชูุฑุงุฑ (Unique indexes + Atomic/Txn) |
|     5 | Admin Auth (JWT) + ูุชุญ/ููู ุงูุญุฌุฒ                             |
|     6 | Next.js: ุตูุญุงุช (Shows list / Show details)                   |
|     7 | Next.js: ุฑุณู ุฎุฑูุทุฉ ุงูููุงุนุฏ + ุงุฎุชูุงุฑ ูุชุนุฏุฏ + ุฅุฌูุงูู ุงูุณุนุฑ     |
|     8 | Next.js: Form ููู ุงูุฃูุฑ + ุฅุฑุณุงู ุงูุญุฌุฒ + ุตูุญุฉ ุชุฃููุฏ           |
|     9 | ุงูุฏูุน (ุชูุงูู ุฅู ุฃููู) ุฃู ูุณุงุฑ ูุฏูู + ุดุงุดุฉ ุชุนูููุงุช            |
|    10 | Admin UI ุจุณูุท: ุฅุฏุงุฑุฉ ุงูุนุฑูุถ + ุงูุชุฎุทูุท + ุงูุชุณุนูุฑ + ุงูุญุฌูุฒุงุช   |
|    11 | ุงุฎุชุจุงุฑุงุช + ุญุงูุงุช ุงูุญุงูุฉ (ุญุฌุฒ ูุชุฒุงูู/ุฅุบูุงู ุงูุญุฌุฒ/ููุงุนุฏ ูุฎููุฉ) |
|    12 | ุชุญุณูู ุชุฌุฑุจุฉ/ุฃุฏุงุก ุฎุฑูุทุฉ ุงูููุงุนุฏ + ุชูููู ุงููุฏุงุกุงุช              |
|    13 | ูุดุฑ Staging + ุฅุนุฏุงุฏ env vars + ุชุฌุฑุจุฉ ุชุดุบูู ูุงููุฉ             |
|    14 | ุชุซุจูุช ููุงุฆู + ุชูุซูู ุชุดุบูู + ุชุณููู                            |

---

## 10) ุชูุฒูุน ุงูุฃุฏูุงุฑ

- Backend: DB + APIs + Transactions + Auth + (Webhooks ููุฏูุน ูู ููุฌูุฏ).
- Frontend (Next.js): Seat map UI + ุตูุญุงุช ุงูุญุฌุฒ + Admin UI ุจุณูุท.
- QA/PM: ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ + ูุชุงุจุนุฉ ุงูุชูุฏู ูููููุง.

---

## 11) ุงููุฎุงุทุฑ ูุฎุทุฉ ุงูุชุนุงูู

| ุงูุฎุทุฑ                           | ุงูุชุฃุซูุฑ                 | ุงูุญู/ุงูุชุฎููู                                                                |
| ------------------------------- | ----------------------- | --------------------------------------------------------------------------- |
| ุชุฃุฎูุฑ ููุงุชูุญ/ุชูุนูู ุจูุงุจุฉ ุงูุฏูุน  | ุชุนุทูู ุงูุฏูุน ุงูุฃูุชููุงุชูู | ุชุณููู ูุณุงุฑ ุฏูุน ูุฏูู + ุฏูุฌ ุงูุจูุงุจุฉ ุจุนุฏ ุงูุชุณููู                               |
| ุณุจุงูุงุช ุงูุญุฌุฒ (ููุณ ุงููุฑุณู ูุฑุชูู) | ูุดุงูู ุซูุฉ/ูุงู           | MongoDB Unique indexes + Atomic updates (+ optional seat hold/transactions) |
| ุชุบููุฑ Layout ููู ุนุฑุถ            | ุชุนููุฏ ูู ุงูู UI/DB      | ุชุตููู `ShowLayout` ูู ุงูุจุฏุงูุฉ ูุฑุจุทู ุจุงูุนุฑุถ                                  |

---

## 12) ุงููุชุงุจุนุฉ ูุงูุญูููุฉ

ุณูุชู ุนูุฏ ุงุฌุชูุงุน ูุฑูู (Check-in) ูู ูุจู **ูููุฏุณ ุนุจุฏุงููู ูุงูู** ููุชุฃูุฏ ูู ุงูุณูุฑ ูู ุงููุณุงุฑ ุงูุตุญูุญ ูููุดุฑูุนุ ูุฃูู ูุง ุชูุฌุฏ ูุดุงูู ุฃู ุนูุงุฆู ูุคุซุฑุฉ ุนูู ุฎุทุฉ ุงูู 14 ููู.

---

<div align="center">

**Next Vision Team**

</div>
